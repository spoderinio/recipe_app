#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Скрипт за добавяне на примерни рецепти в базата данни
Използвайте го за тестване или като начална база с рецепти
"""

import database

# Инициализираме базата данни
database.init_db()
database.migrate_add_category()

# Примерни рецепти с категории
sample_recipes = [
    {
        "name": "Баница със сирене",
        "category": "Закуски",
        "ingredients": """500 г готови кори за баница
400 г сирене (предимно бяло саламурено)
3 яйца
200 мл газирана вода
100 мл олио
1 ч.л. сол (по желание)
Масло за намазване""",
        "instructions": """1. Загрейте фурната на 180°C.
2. В купа разбийте яйцата с газираната вода и олиото.
3. Настъргайте сиренето на едро ренде.
4. Намажете тава с масло.
5. Разгънете кората и я разделете на 2-3 части.
6. Всяка част намажете с яйчената смес, поръсете със сирене.
7. Навийте на руло и наредете в тавата.
8. Повторете с всички кори.
9. Поръсете отгоре с останалата яйчена смес.
10. Печете около 40-45 минути до златист цвят.
11. След изваждане от фурната, покрийте с кърпа за 10 минути."""
    },
    {
        "name": "Шопска салата",
        "category": "Салати",
        "ingredients": """3 домата
2 краставици
1 чушка
1 глава лук
200 г сирене
Магданоз
Зехтин
Оцет
Сол""",
        "instructions": """1. Нарежете доматите на кубчета.
2. Обелете краставиците и ги нарежете на кубчета.
3. Почистете чушката от семките и я нарежете на кубчета.
4. Нарежете лука на тънки полумесеци.
5. Смесете всички зеленчуци в купа.
6. Добавете нарязан магданоз.
7. Поръсете със сол по вкус.
8. Прибавете зехтин и оцет.
9. Разбъркайте добре.
10. Настъргайте сиренето отгоре.
11. Сервирайте веднага."""
    },
    {
        "name": "Пилешка супа",
        "category": "Супи",
        "ingredients": """1 цяло пиле или 500 г пилешки части
2 моркова
1 глава лук
2 стръка целина
2 картофа
Фиде или ориз (по желание)
Магданоз
Сол, черен пипер
3 л вода""",
        "instructions": """1. Измийте пилето и го сложете във вряща вода.
2. Оставете да ври 10 минути и махнете пяната отгоре.
3. Обелете и нарежете моркова и лука на средно големи парчета.
4. Добавете ги в супата заедно с целината.
5. Варете на тих огън 40-50 минути.
6. Извадете пилето и зеленчуците.
7. Прецедете бульона.
8. Обелете и нарежете картофите на кубчета.
9. Върнете бульона на котлона, добавете картофите.
10. Варете 15 минути.
11. Добавете фиде или ориз и варете още 10 минути.
12. Откъснете месото от пилето и го върнете в супата.
13. Подправете със сол и черен пипер.
14. Поръсете с магданоз при сервиране."""
    },
    {
        "name": "Тиквички с ориз",
        "category": "Основни ястия",
        "ingredients": """1 кг тиквички
200 г ориз
1 глава лук
2 домата
1 чаша кисело мляко
2 яйца
Копър
Мента (по желание)
Олио
Сол, черен пипер""",
        "instructions": """1. Измийте и нарежете тиквичките на кръгчета около 1 см.
2. Запържете лука на ситно в олио.
3. Добавете ориза и го запържете 2-3 минути.
4. Прибавете нарязаните на кубчета домати.
5. Подправете със сол, пипер, копър и мента.
6. Варете 5 минути и свалете от котлона.
7. Подредете тиквичките в тава.
8. Между всяко ниво на тиквички слагайте от ориза.
9. Добавете вода (около 2 чаши).
10. Печете на 180°C около 40 минути.
11. Разбийте яйцата с киселото мляко.
12. Излейте смесята върху тиквичките.
13. Върнете в фурната за още 15 минути."""
    },
    {
        "name": "Мусака с картофи",
        "category": "Основни ястия",
        "ingredients": """1 кг картофи
500 г кайма (смесена)
2 глави лук
2 домата
3 яйца
500 мл кисело мляко
2 с.л. брашно
Сирене
Червен пипер
Сол, черен пипер
Олио""",
        "instructions": """1. Обелете и нарежете картофите на кръгчета.
2. Запържете ги на силен огън до златист цвят.
3. Нарежете лука на ситно и го запържете.
4. Добавете каймата и я задушете.
5. Прибавете нарязаните домати.
6. Подправете с червен пипер, сол и черен пипер.
7. Варете 15 минути.
8. В намаслена тава наредете половината картофи.
9. Отгоре сложете каймата.
10. Покрийте с останалите картофи.
11. Разбийте яйцата с киселото мляко и брашното.
12. Добавете настърганото сирене в сместа.
13. Излейте смесята върху картофите.
14. Печете на 180°C около 40-45 минути до златист цвят."""
    }
]

# Добавяме рецептите
print("Добавяне на примерни рецепти с категории...")
for recipe in sample_recipes:
    recipe_id = database.add_recipe(
        recipe["name"],
        recipe["ingredients"],
        recipe["instructions"],
        recipe["category"]
    )
    print(f"✓ Добавена рецепта: {recipe['name']} → Категория: {recipe['category']} (ID: {recipe_id})")

print(f"\n✅ Успешно добавени {len(sample_recipes)} рецепти!")
print("Стартирайте приложението с: python3 app.py")
