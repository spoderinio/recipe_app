<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è - –ö–Ω–∏–≥–∞ —Å —Ä–µ—Ü–µ–ø—Ç–∏</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <header class="header">
        <div class="header-content container">
            <h1>‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∏ –ø–∞–Ω–µ–ª</h1>
            <div class="nav-links">
                <a href="/">üè† –ù–∞—á–∞–ª–æ</a>
                <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()">üåô</button>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- Admin Navigation -->
        <div class="admin-nav">
            <button class="btn btn-primary admin-nav-active" onclick="showAdminSection('recipes')">üìñ –†–µ—Ü–µ–ø—Ç–∏</button>
            <button class="btn btn-secondary" onclick="window.location.href='/admin/categories'">üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</button>
        </div>
        <!-- Add/Edit Recipe Form -->
        <div class="admin-form">
            <h2>‚ûï –î–æ–±–∞–≤–∏ –Ω–æ–≤–∞ —Ä–µ—Ü–µ–ø—Ç–∞</h2>
            <form id="recipe-form" onsubmit="submitRecipe(event)">
                <div class="form-group">
                    <label for="recipe-name">–ò–º–µ –Ω–∞ —Ä–µ—Ü–µ–ø—Ç–∞—Ç–∞:</label>
                    <input 
                        type="text" 
                        id="recipe-name" 
                        name="name" 
                        placeholder="–ù–∞–ø—Ä. –ë–∞–Ω–∏—Ü–∞ —Å –ø–ª—ä–Ω–∫–∞"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="recipe-ingredients">–°—ä—Å—Ç–∞–≤–∫–∏:</label>
                    <textarea 
                        id="recipe-ingredients" 
                        name="ingredients" 
                        placeholder="–ù–∞–ø–∏—à–µ—Ç–µ —Å—ä—Å—Ç–∞–≤–∫–∏—Ç–µ –≤—Å—è–∫–∞ –Ω–∞ –Ω–æ–≤ —Ä–µ–¥ –∏–ª–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏ —Å—ä—Å –∑–∞–ø–µ—Ç–∞—è..."
                        required
                    ></textarea>
                </div>
                
                <div class="form-group">
                    <label for="recipe-instructions">–ù–∞—á–∏–Ω –Ω–∞ –ø—Ä–∏–≥–æ—Ç–≤—è–Ω–µ:</label>
                    <textarea 
                        id="recipe-instructions" 
                        name="instructions" 
                        placeholder="–û–ø–∏—à–µ—Ç–µ —Å—Ç—ä–ø–∫–∏—Ç–µ –∑–∞ –ø—Ä–∏–≥–æ—Ç–≤—è–Ω–µ..."
                        required
                    ></textarea>
                </div>
                
                <div class="form-group">
                    <label for="recipe-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                    <div class="category-input-group">
                        <select id="recipe-category-select" class="category-select" onchange="handleCategorySelect(this.value)">
                            <option value="">-- –ò–∑–±–µ—Ä–µ—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è --</option>
                            {% for category in categories %}
                            <option value="{{ category.category }}">{{ category.category }}</option>
                            {% endfor %}
                            <option value="__new__">‚ûï –ù–æ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è...</option>
                        </select>
                        <input 
                            type="text" 
                            id="recipe-category-input" 
                            class="category-input" 
                            placeholder="–ò–ª–∏ –≤—ä–≤–µ–¥–µ—Ç–µ –Ω–æ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è..."
                            style="display: none;"
                        >
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary">‚ûï –î–æ–±–∞–≤–∏ —Ä–µ—Ü–µ–ø—Ç–∞</button>
            </form>
        </div>
        
        <!-- Recipe List -->
        <div class="admin-recipe-list">
            <h2>üìã –°–ø–∏—Å—ä–∫ —Å —Ä–µ—Ü–µ–ø—Ç–∏</h2>
            <div id="admin-recipe-list">
                {% if recipes %}
                    {% for recipe in recipes %}
                    <div class="admin-recipe-item">
                        <div class="admin-recipe-name">{{ recipe.name }}</div>
                        <div class="admin-recipe-actions">
                            <button class="btn btn-secondary" onclick="editRecipe({{ recipe.id }})">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π</button>
                            <button class="btn btn-danger" onclick="deleteRecipe({{ recipe.id }}, '{{ recipe.name|replace("'", "\\'") }}')">üóëÔ∏è –ò–∑—Ç—Ä–∏–π</button>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <p class="empty-state">–í—Å–µ –æ—â–µ –Ω—è–º–∞ —Ä–µ—Ü–µ–ø—Ç–∏</p>
                {% endif %}
            </div>
        </div>
    </div>
    
    <script src="/static/js/app.js"></script>
</body>
</html>
